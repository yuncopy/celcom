{% extends "layout.html" %}
{% block content %}
<div class="span8">
    <div class="row-fluid">
        <div class="page-header">
            <h1>列表<small> 游戏管理</small></h1>
        </div>
        <table class="table table-striped table-bordered table-condensed"  id="gamelist">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>名称</th>
                    <th>版本</th>
                    <th>下载次数</th>
                    <th>发布时间</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                
            </tbody>
        </table>
        
        <a href="/file/add.html" class="btn btn-success">添加游戏</a>
    </div>
</div>
<link href="/assets/css/jquery.dataTables.min.css" rel="stylesheet">
<script src="/assets/js/jquery.dataTables.min.js"></script>

<script>
    var table = $('#gamelist').DataTable({
        "processing": true,
        "serverSide": true,
        "info":     false,
        "ajax": {
          "url": "/file/getgame.html",
          "type": "POST"
        },
        "rowCallback": function( row, data, index ) {
            $(row).addClass('list-users');
        }
    });
    
    // 删除操作
    $(document).ready(function(){
        $(document).on('click','.delcate',function(event){
            var $target = $(event.target);
            var data = $target.attr('data');
            console.log(data);
            $('#delModal').find('.aDel').attr('href',data);
        });
    });
</script>
{% endblock %}
